page %>% html_nodes(".listing-items") %>% html_text() %>% gsub("\\n","",.) %>% str_trim()
page %>% html_nodes(".listing-items") %>% html_text() %>% gsub("\\n","",.) %>% str_trim()
page %>% html_nodes(".listing-items") %>% html_text() %>% gsub("\n","",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n*")
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n*","",.)
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\\n*","",.)
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\\n*| *","",.)
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\\n*","",.)
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\\n*","",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\\n*|  *","",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\\n*|\  *","",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\\n*","",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub(" \\n*","",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n*","",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n*","",.) %>% str_trim() %>%
str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n*","",.) %>% str_trim() %>%
gsub("  ","",.)
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n*","",.) %>% str_trim() %>%
gsub("   ","",.)
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n*","",.) %>% str_trim() %>%
gsub("    ","",.)
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n*","",.) %>% str_trim() %>%
gsub("   "," ",.)
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n*","",.) %>% str_trim() %>%
gsub("\  ","",.)
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n*|\  ","",.) %>% str_trim()
?gsub
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("[:blank:]"," ",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("[:blank:]|\n"," ",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("[:blank:]|\n"," ",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n"," ",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n|[:blank:]"," ",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n"," ",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n"," ",.) %>% str_trim() %>%
gsub("$*","",.)
page %>% html_node(".card-body") %>% html_text() %>% gsub("\n"," ",.) %>% str_trim()
page %>% html_node(".card-body") %>% html_text() %>% gsub("\n"," ",.) %>% str_trim() %>%
gsub("$*","",.)
test_1 <- page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n"," ",.) %>% str_trim()
test_1 %>%
gsub("$*","",.)
test_1[2] %>%
gsub("$*","",.)
test_1[2]
test_1[2] %>%
gsub("\$*","",.)
test_1[2] %>%
gsub("\\$*","",.)
test_1[2] %>%
gsub("\\$","",.)
test_1[2] %>%
gsub("\\$|\\,","",.)
test_1[2] %>%
gsub("\\$|\\,","",.) %>% word(.,2,2)
?str_extract
test_1[2] %>%
str_extract(., "($ )")
test_1[2]
test_1[2] %>%
str_extract(., "(?:$ )")
test_1[2] %>%
str_extract(., "(?:$)")
test_1[2] %>%
str_extract(., "(?:$)")
test_1[2] %>%
str_extract(., "(?=$)")
test_1[2] %>%
str_extract(., "(SUV)")
test_1[2] %>%
str_extract(., "(\d)")
test_1[2] %>%
str_extract(., "\d")
test_1[2] %>%
str_extract(., "\d")
test_1[2] %>%
str_extract(., "\d")
test_1[2]
test_1[2] %>%
str_extract(., "\\d")
test_1[2] %>%
str_extract(., "\\d+")
test_1[2] %>%
str_extract(., "(?i)\\d+")
test_1[2] %>%
str_extract(., "\$[0-9]+")
test_1[2] %>%
str_extract(., "\$[0-9]+")
test_1[2] %>%
str_extract(., "\\$[0-9]+")
test_1[2]
test_1[2] %>% str_remove(.,",") %>%
str_extract(., "\\$[0-9]+")
test_1[2] %>% str_remove(.,",") %>%
str_extract(., "\$[0-9]+")
redr$open()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n"," ",.) %>% str_trim()
test_1[2]
test_1[2] %>% str_remove(.,",") %>%
str_extract(., "\\DC[0-9]+")
test_1[2] %>% str_remove(.,",") %>%
str_extract(., "\\DC[0-9]+\kw")
test_1[2] %>% str_remove(.,",") %>%
str_extract(., "\\DC[0-9]+|kw")
test_1[2] %>% str_remove(.,",") %>%
str_extract(., "\\DC[0-9]+")
test_1[2] %>% str_remove(.,",") %>%
str_extract(., "\\DC[0-9]+|\\kw")
test_1[2] %>% str_remove(.,",") %>%
str_extract(., "\\DC[0-9]+|\kw")
links_new
links_new[[1]][1]
page %>% html_nodes(".card-body") %>% html_text()
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n"," ",.)
page %>% html_nodes(".card-body") %>% html_text() %>% gsub("\n"," ",.) %>% str_trim()
page %>% html_nodes(".card-body") %>% html_text()
test_1 <- page %>% html_nodes(".card-body") %>% html_text( %>% data.table()
test_1 <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
test_1
View(test_1)
list_cars <- data.table()
list_cars <- data.table()
for (i in 1:2) {
redr$navigate(links_new[[1]][i])
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text()
list_cars <<- rbind(list_cars, list_12cars_if)
}
url_carsales <- "https://www.carsales.com.au"
urls_new <- "https://www.carsales.com.au/cars/new/electric-fueltype/?sort=Price&offset="
urls_used <- "https://www.carsales.com.au/cars/used/electric-fueltype/?sort=Price&offset="
urls_demo <- "https://www.carsales.com.au/cars/demo-and-near-new/electric-fueltype/?sort=Price&offset="
links_new <- data.table()
for (i in (seq(0,38,1)*12)) {
url_with_number <- paste0(urls_new,i)
links_new <<- rbind(links_new, url_with_number)
}
links_used <- data.table()
for (i in (seq(0,16,1)*12)) {
url_with_number <- paste0(urls_used,i)
links_used <<- rbind(links_used, url_with_number)
}
links_demo <- data.table()
for (i in (seq(0,16,1)*12)) {
url_with_number <- paste0(urls_demo,i)
links_demo <<- rbind(links_demo, url_with_number)
}
list_cars <- data.table()
for (i in 1:2) {
redr$navigate(links_new[[1]][i])
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars <<- rbind(list_cars, list_12cars_if)
}
View(list_cars)
View(list_12cars_if)
for (i in 1:2) {
redr$navigate(links_new[[1]][i])
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.table()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars <<- rbind(list_cars, list_12cars_if)
}
list_cars_new <- data.table()
for (i in 1:2) {
redr$navigate(links_new[[1]][i])
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.table()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars <<- rbind(list_cars, list_12cars_if)
}
list_cars_demo <- data.table()
View(list_cars_new)
View(list_cars)
for (i in 1:2) {
redr$navigate(links_new[[1]][i])
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.table()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars_new <<- rbind(list_cars, list_12cars_if)
}
list_cars_new <- data.table()
for (i in 1:2) {
redr$navigate(links_new[[1]][i])
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.table()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
View(list_cars_new)
# to cleanup the port, by kill the java instance(s) inside Rstudio
# refer: https://github.com/ropensci/RSelenium/issues/228
system("taskkill /im java.exe /f", intern=FALSE, ignore.stdout=FALSE)
# check if ports still open
pingr::ping_port("localhost", 4567)
# Check the available chrome version, the default is latest
verlist <- binman::list_versions("chromedriver") %>% flatten_chr()
# check my chrome version. wmic: WMI command-line
version <- system2(command = "wmic",args = 'datafile where name="C:\\\\Program Files (x86)\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe" get Version /value',stdout = TRUE,stderr = TRUE)
version <- str_sub(version[3],start = 9,end = -2)
# select the latest version earlier the current chrome version
ver <- max(verlist[version > verlist])
# driver setting
driver <- rsDriver(browser = "chrome", chromever = ver)
driver$client$close()
redr <- driver[["client"]]
redr$open()
# redr$close()
View(links_new)
links_new[[1]]
for (i in 1:2) {
redr$navigate(links_new[[1]][i])
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.table()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
View(list_cars_new)
for (i in 1:2) {
redr$navigate(links_new[[1]][i])
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.table()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
View(list_cars_new)
list_cars_new <- data.table()
redr$navigate(links_new[[1]][i])
rm(page_if)
rm(soup_if)
list_cars_new <- data.table()
for (i in 1:2) {
redr$navigate(links_new[[1]][i])
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.table()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
View(list_cars_new)
# to cleanup the port, by kill the java instance(s) inside Rstudio
# refer: https://github.com/ropensci/RSelenium/issues/228
system("taskkill /im java.exe /f", intern=FALSE, ignore.stdout=FALSE)
# check if ports still open
pingr::ping_port("localhost", 4567)
# Check the available chrome version, the default is latest
verlist <- binman::list_versions("chromedriver") %>% flatten_chr()
# check my chrome version. wmic: WMI command-line
version <- system2(command = "wmic",args = 'datafile where name="C:\\\\Program Files (x86)\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe" get Version /value',stdout = TRUE,stderr = TRUE)
version <- str_sub(version[3],start = 9,end = -2)
# select the latest version earlier the current chrome version
ver <- max(verlist[version > verlist])
# driver setting
driver <- rsDriver(browser = "chrome", chromever = ver)
driver$client$close()
redr <- driver[["client"]]
redr$open()
# redr$close()
# Check the available chrome version, the default is latest
verlist <- binman::list_versions("chromedriver") %>% flatten_chr()
# check my chrome version. wmic: WMI command-line
version <- system2(command = "wmic",args = 'datafile where name="C:\\\\Program Files (x86)\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe" get Version /value',stdout = TRUE,stderr = TRUE)
version <- str_sub(version[3],start = 9,end = -2)
# select the latest version earlier the current chrome version
ver <- max(verlist[version > verlist])
# driver setting
driver <- rsDriver(browser = "chrome", chromever = ver)
driver$client$close()
redr <- driver[["client"]]
redr$open()
# redr$close()
# test_12cars <- page %>% html_nodes(".price .js-encode-search") %>%
# html_attr("href") %>% paste0(url_carsales,.) %>% data.table()
url_carsales <- "https://www.carsales.com.au"
urls_new <- "https://www.carsales.com.au/cars/new/electric-fueltype/?sort=Price&offset="
urls_used <- "https://www.carsales.com.au/cars/used/electric-fueltype/?sort=Price&offset="
urls_demo <- "https://www.carsales.com.au/cars/demo-and-near-new/electric-fueltype/?sort=Price&offset="
links_new <- data.table()
for (i in (seq(0,38,1)*12)) {
url_with_number <- paste0(urls_new,i)
links_new <<- rbind(links_new, url_with_number)
}
links_used <- data.table()
for (i in (seq(0,16,1)*12)) {
url_with_number <- paste0(urls_used,i)
links_used <<- rbind(links_used, url_with_number)
}
links_demo <- data.table()
for (i in (seq(0,16,1)*12)) {
url_with_number <- paste0(urls_demo,i)
links_demo <<- rbind(links_demo, url_with_number)
}
links_new
list_cars_new <- data.table()
for (i in 1:2) {
redr$navigate(links_new[[1]][i])
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.table()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
for (i in 1:2) {
redr$navigate(links_new[[1]][i])
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.table()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
for (i in 1:2) {
redr$navigate(links_new[[1]][i])
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.frame()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
View(soup_if)
soup_if[[1]]
View(soup_if)
View(page_if)
links_new <- sapply(links_new, as.character)
links_used <- sapply(links_used, as.character)
links_demo <- sapply(links_demo, as.character)
for (i in 1:2) {
link_if <- links_new[[1]][i]
redr$navigate(link_if)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.frame()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
links_new
links_new[1]
for (i in 1:2) {
link_if <- links_new[i]
redr$navigate(link_if)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.frame()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
View(links_new)
links_new[1]
for (i in 1:2) {
link_if <- links_new[i]
redr$navigate(link_if)
Sys.sleep(0.5)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.frame()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
rm(page_if,soup_if)
list_cars_new <- data.frame()
for (i in 1:2) {
link_if <- links_new[i]
redr$navigate(link_if)
Sys.sleep(0.5)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
list_12cars_if <- data.frame()
list_12cars_if <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
list_cars_new <- data.frame()
for (i in 1:2) {
link_if <- links_new[i]
redr$navigate(link_if)
Sys.sleep(0.5)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
elements <- page %>% html_nodes(".card-body") %>% html_text() %>% data.table()
list_12cars_if <- data.frame(raw_ele = elements)
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
xml2::read_html(soup_if[[1]])
page_if <- xml2::read_html(soup_if[[1]])
elements <- page %>% html_nodes(".card-body") %>% html_text()
for (i in 1:2) {
link_if <- links_new[i]
redr$navigate(link_if)
Sys.sleep(0.5)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
elements <- page_if %>% html_nodes(".card-body") %>% html_text()
list_12cars_if <- data.frame(raw_ele = elements)
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
}
View(list_cars_new)
links_new <- data.table()
for (i in (seq(0,38,1)*12)) {
url_with_number <- paste0(urls_new,i)
links_new <<- rbind(links_new, url_with_number)
}
links_new <- sapply(links_new, as.character)
links_new[1]
links_used <- data.table()
for (i in (seq(0,16,1)*12)) {
url_with_number <- paste0(urls_used,i)
links_used <<- rbind(links_used, url_with_number)
}
links_used <- sapply(links_used, as.character)
links_demo <- data.table()
for (i in (seq(0,16,1)*12)) {
url_with_number <- paste0(urls_demo,i)
links_demo <<- rbind(links_demo, url_with_number)
}
links_demo <- sapply(links_demo, as.character)
rm(page_if,soup_if)
list_cars_new <- data.frame()
for (i in 1:39) {
link_if <- links_new[i]
redr$navigate(link_if)
Sys.sleep(0.5)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
elements <- page_if %>% html_nodes(".card-body") %>% html_text()
list_12cars_if <- data.frame(raw_ele = elements)
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
paste(i,word(elements,1,3))
}
list_cars_new <- data.frame()
for (i in 1:39) {
link_if <- links_new[i]
redr$navigate(link_if)
Sys.sleep(0.5)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
elements <- page_if %>% html_nodes(".card-body") %>% html_text()
list_12cars_if <- data.frame(raw_ele = elements)
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
print(i,word(elements,1,3))
}
list_cars_new <- data.frame()
for (i in 1:39) {
link_if <- links_new[i]
redr$navigate(link_if)
Sys.sleep(0.5)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
elements <- page_if %>% html_nodes(".card-body") %>% html_text()
list_12cars_if <- data.frame(raw_ele = elements)
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
print(i,word(elements,1,1))
}
for (i in 1:39) {
link_if <- links_new[i]
redr$navigate(link_if)
Sys.sleep(0.5)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
elements <- page_if %>% html_nodes(".card-body") %>% html_text()
list_12cars_if <- data.frame(raw_ele = elements)
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
print(i,elements[1])
}
for (i in 1:39) {
link_if <- links_new[i]
redr$navigate(link_if)
Sys.sleep(0.5)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
elements <- page_if %>% html_nodes(".card-body") %>% html_text()
list_12cars_if <- data.frame(raw_ele = elements)
list_cars_new <<- rbind(list_cars_new, list_12cars_if)
print(paste(i,word(elements,1,3)))
}
View(list_cars_new)
list_cars_used <- data.table()
for (i in 1:17) {
link_if <- links_used[i]
redr$navigate(link_if)
Sys.sleep(0.5)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
elements <- page_if %>% html_nodes(".card-body") %>% html_text()
list_12cars_if <- data.frame(raw_ele = elements)
list_cars_used <<- rbind(list_cars_used, list_12cars_if)
print(paste(i,word(elements,1,3)))
}
list_cars_demo <- data.table()
for (i in 1:17) {
link_if <- links_demo[i]
redr$navigate(link_if)
Sys.sleep(0.5)
soup_if <- redr$getPageSource()
page_if <- xml2::read_html(soup_if[[1]])
elements <- page_if %>% html_nodes(".card-body") %>% html_text()
list_12cars_if <- data.frame(raw_ele = elements)
list_cars_demo <<- rbind(list_cars_demo, list_12cars_if)
print(paste(i,word(elements,1,3)))
}
redr$close()
# to cleanup the port, by kill the java instance(s) inside Rstudio
# refer: https://github.com/ropensci/RSelenium/issues/228
system("taskkill /im java.exe /f", intern=FALSE, ignore.stdout=FALSE)
# check if ports still open
pingr::ping_port("localhost", 4567)
